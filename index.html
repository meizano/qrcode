<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>QR Code Generator</title>
    <script type="text/javascript" src="./js/qrcode.js"></script>
    <style>
        h1 {
            text-align: center;
        }
        
        #qrResult {
            margin: auto;
            height: 16rem;
            width: 16rem;
        }
    </style>
</head>

<body>
    <!-- <a href="./instascan.html">InstaScan QR Code Scanner</a>
    <a href="./qrcodein.html">Code Kotis QR Code Scanner</a> -->
    <form onsubmit="generate();return false;">
        <input type="text" id="qr" name="" style="width: 100%;">
    </form>
    <h1>Dynamic QR Code</h1>
    <div id="qrResult"></div>


    <script type="text/javascript">
        var qrcode = new QRCode(document.getElementById('qrResult'));

        function generate() {
            var message = document.getElementById('qr');
            if (!message.value) {
                alert("Ketik disini");
                message.focus();
                return;
            }

            qrcode.makeCode(message.value);
        }

        function getRandomInt(max) {
            let token = Math.floor(Math.random() * Math.floor(max));
            let idalat = "FH01";
            let d = new Date();
            let waktu = d.getTime();
            let pesan = idalat + waktu + token;
            console.log(pesan);
            return pesan;
        }

        function makeqr() {
            qrcode.makeCode(getRandomInt(9999)
                // , {
                //     width: 50,
                //     height: 50,
                //     typeNumber: 4,
                //     colorDark: "#000000",
                //     colorLight: "#ffffff"
                // }
            );
        }

        makeqr();
        setInterval(makeqr, 5000);
    </script>

</body>

</html>